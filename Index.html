<!--
Single-file HTML header for a D&D-aware multiplayer game website.
Copy & paste the <header>...</header> part into your site's header area, or use the whole file as a standalone demo page.
Features:
- Responsive, modern header with logo, nav, and a smart search box
- Local embeddable DnD knowledge base (sample entries). Replace `dndData` with full SRD JSON or an API endpoint.
- Instant info card with details (spells, monsters, items), keyboard shortcut (/), fuzzy search, and filter chips
- Accessible and keyboard-friendly

How to use:
1) Paste the whole file into a .html for a demo, or copy only the <header>...</header> into your site's header.
2) Replace or augment `dndData` in the <script> with your own dataset or fetch from an API.
3) Customize styles or icons as desired.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DnD Game Header â€” Knowledge Header</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0f1724; /* deep slate */
      --card: #0b1220;
      --muted: #97a0b5;
      --accent: #ef9a48;
      --glass: rgba(255,255,255,0.04);
      --glass-strong: rgba(255,255,255,0.06);
      --radius: 12px;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#071124 0%, #081426 100%);color:#e6eef8;min-height:100vh}

    /* Header */
    header.app-header{display:flex;align-items:center;gap:18px;padding:14px 20px;background:linear-gradient(90deg, rgba(255,255,255,0.02), transparent);backdrop-filter: blur(6px)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,#ffcc66,#ff8a3d);display:flex;align-items:center;justify-content:center;font-weight:800;color:#082;box-shadow:0 6px 20px rgba(0,0,0,0.6)}
    .brand h1{font-size:16px;margin:0;line-height:1}
    .brand p{margin:0;font-size:12px;color:var(--muted)}

    nav{margin-left:6px}
    nav a{color:var(--muted);text-decoration:none;margin-right:12px;font-size:13px}

    /* Search */
    .search-wrap{flex:1;display:flex;align-items:center;gap:12px}
    .search{flex:1;display:flex;align-items:center;background:var(--glass);padding:10px;border-radius:12px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02)}
    .search input{flex:1;background:transparent;border:0;color:inherit;font-size:14px;outline:none}
    .chip{padding:6px 8px;border-radius:999px;background:transparent;border:1px solid rgba(255,255,255,0.04);font-size:12px;color:var(--muted);cursor:pointer}

    .actions{display:flex;gap:10px;align-items:center}
    .icon-btn{display:inline-flex;align-items:center;justify-content:center;padding:8px;border-radius:10px;background:var(--glass);border:1px solid rgba(255,255,255,0.02);cursor:pointer}

    /* Results dropdown */
    .results{position:absolute;left:20px;right:20px;top:74px;max-width:1200px;margin:auto;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:10px;box-shadow:0 10px 30px rgba(4,10,20,0.6);z-index:80}
    .results-grid{display:grid;grid-template-columns:1fr 320px;gap:12px}
    .list{max-height:320px;overflow:auto;padding:6px}
    .item{display:flex;gap:12px;padding:8px;border-radius:10px;align-items:center;cursor:pointer}
    .item:hover{background:var(--glass-strong)}
    .thumb{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,#26314a,#1b2a41);display:flex;align-items:center;justify-content:center;font-weight:700}
    .meta{font-size:13px}
    .meta small{color:var(--muted);display:block}

    /* Info card */
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:12px;min-height:140px}
    .card h3{margin:0 0 4px 0}
    .card p{margin:0;color:var(--muted);font-size:13px}
    .stat-row{display:flex;gap:12px;margin-top:10px}
    .stat{background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:8px;font-size:13px}

    /* Mobile adjustments */
    @media (max-width:720px){
      .results{left:12px;right:12px;top:86px}
      .results-grid{grid-template-columns:1fr}
      .brand p{display:none}
    }

    /* Small helper */
    .hint{font-size:12px;color:var(--muted)}
    .muted{color:var(--muted)}
  </style>
</head>
<body>

<header class="app-header" role="banner">
  <div class="brand" aria-hidden="false">
    <div class="logo" title="DM">D</div>
    <div>
      <h1>Adventure Hub</h1>
      <p>DnD Companion â€¢ Search spells, monsters & items</p>
    </div>
  </div>

  <nav aria-label="primary">
    <a href="#">Play</a>
    <a href="#">Campaigns</a>
    <a href="#">Rules</a>
    <a href="#">Community</a>
  </nav>

  <div class="search-wrap" style="position:relative;">
    <div class="search" role="search">
      <span class="hint" style="margin-right:8px">ðŸ”Ž</span>
      <input id="searchInput" placeholder="Search spells, monsters, items â€” press / to focus" aria-label="Search DnD knowledge" />
      <button class="chip" data-filter="all" aria-pressed="true">All</button>
      <button class="chip" data-filter="spells">Spells</button>
      <button class="chip" data-filter="monsters">Monsters</button>
      <button class="chip" data-filter="items">Items</button>
    </div>

    <div class="actions">
      <div class="icon-btn" id="helpBtn" title="Search tips">?</div>
      <button class="icon-btn" id="loginBtn">Sign in</button>
    </div>

    <!-- results dropdown -->
    <div id="results" class="results" style="display:none;" role="dialog" aria-live="polite">
      <div class="results-grid">
        <div class="list" id="list">
          <!-- dynamically filled -->
        </div>
        <div class="card" id="infoPane">
          <h3>Search results</h3>
          <p class="muted">Select an entry to see details here. Tip: try "fireball", "goblin", or "+longsword"</p>
        </div>
      </div>
    </div>
  </div>
</header>

<main style="padding:20px;">
  <h2 style="margin-top:0">Page content below</h2>
  <p class="muted">This is a demo page showing the header in context. Replace the `dndData` array in the script with your full dataset or an API fetch for real usage.</p>
</main>

<script>
/*
Example data model. Each entry has:
- id, type: 'spell'|'monster'|'item'
- name, level (if applicable), cr (challenge rating), source, desc, tags
Replace or fetch an authoritative SRD or your campaign DB.
*/
const dndData = [
  {id:1,type:'spell',name:'Fireball',level:3,school:'Evocation',desc:'A bright streak flashes...explodes.',source:'SRD',tags:['damage','area']},
  {id:2,type:'monster',name:'Goblin',cr:0.25,desc:'Small humanoid, clever and sneaky.',source:'SRD',tags:['humanoid']},
  {id:3,type:'item',name:'Longsword',rarity:'Common',desc:'Versatile melee weapon.',source:'SRD',tags:['weapon','melee']},
  {id:4,type:'spell',name:'Healing Word',level:1,school:'Evocation',desc:'A creature regains hit points.',source:'SRD',tags:['healing']},
  {id:5,type:'monster',name:'Adult Red Dragon',cr:17,desc:'Huge dragon, fearsome breath weapon.',source:'SRD',tags:['dragon','legendary']}
];

// Quick helpers
const searchInput = document.getElementById('searchInput');
const resultsEl = document.getElementById('results');
const listEl = document.getElementById('list');
const infoPane = document.getElementById('infoPane');
let activeFilter = 'all';

// Keyboard shortcut: focus search with '/'
window.addEventListener('keydown', (e)=>{
  if(e.key === '/' && document.activeElement !== searchInput){
    e.preventDefault();
    searchInput.focus();
    searchInput.select();
  }
});

// Chip filter behavior
document.querySelectorAll('.chip').forEach(chip=>{
  chip.addEventListener('click', ()=>{
    document.querySelectorAll('.chip').forEach(c=>c.setAttribute('aria-pressed','false'));
    chip.setAttribute('aria-pressed','true');
    activeFilter = chip.dataset.filter;
    doSearch(searchInput.value.trim());
  });
});

searchInput.addEventListener('input', (e)=>{
  doSearch(e.target.value.trim());
});

searchInput.addEventListener('focus', ()=>{
  if(listEl.children.length>0) resultsEl.style.display='block';
});

searchInput.addEventListener('blur', ()=>{
  // small delay so clicks register
  setTimeout(()=>{ if(!resultsEl.contains(document.activeElement)) resultsEl.style.display='none'; },180);
});

// Simple fuzzy search: tokenize, score by token matches, prefer startsWith, boost exact type prefix (+spell, +monster, +item)
function doSearch(q){
  if(!q){ listEl.innerHTML=''; infoPane.innerHTML=`<h3>Search results</h3><p class="muted">Type to search. Try "fireball", "goblin", or use +spell / +monster / +item to filter.</p>`; resultsEl.style.display='none'; return; }

  resultsEl.style.display='block';
  const typePrefix = (q.match(/^\+(spell|monster|item)\b/i)||[])[1];
  const raw = typePrefix ? q.replace(/^\+\w+\s*/,'') : q;
  const tokens = raw.toLowerCase().split(/\s+/).filter(Boolean);

  const candidates = dndData.filter(d=>{
    if(typePrefix && d.type !== (typePrefix==='spell'?'spell':typePrefix)) return false;
    if(activeFilter !== 'all' && d.type !== activeFilter) return false;
    return true;
  }).map(d => {
    // score
    let score = 0;
    const name = d.name.toLowerCase();
    tokens.forEach(t=>{
      if(name === t) score += 100; // exact
      else if(name.startsWith(t)) score += 40;
      else if(name.includes(t)) score += 18;
      // match in description or tags
      if((d.desc||'').toLowerCase().includes(t)) score += 6;
      if((d.tags||[]).some(tag=>tag.includes(t))) score += 12;
    });
    // boost by type preference
    if(d.type==='spell') score += 2;
    return {...d,score};
  }).filter(d=>d.score>0).sort((a,b)=>b.score - a.score).slice(0,50);

  // Render
  listEl.innerHTML = candidates.map(c => `
    <div class="item" tabindex="0" data-id="${c.id}" data-type="${c.type}">
      <div class="thumb">${escapeHtml(c.name.split(' ')[0].slice(0,2))}</div>
      <div style="flex:1">
        <div class="meta"><strong>${escapeHtml(c.name)}</strong> <small class="muted">${escapeHtml(titleOf(c))}</small></div>
        <div class="muted" style="font-size:13px">${escapeHtml(shorten(c.desc,80))}</div>
      </div>
    </div>
  `).join('');

  // click binding
  Array.from(listEl.children).forEach(el=>{
    el.addEventListener('click', ()=>{
      const id = Number(el.dataset.id);
      selectEntry(id);
    });
    el.addEventListener('keydown', (e)=>{ if(e.key==='Enter') el.click(); });
  });
}

function titleOf(c){
  if(c.type==='spell') return `Spell â€¢ level ${c.level || 'â€”'} â€¢ ${c.school || ''}`;
  if(c.type==='monster') return `Monster â€¢ CR ${c.cr || 'â€”'}`;
  return `Item â€¢ ${c.rarity || 'â€”'}`;
}

function selectEntry(id){
  const entry = dndData.find(d=>d.id===id);
  if(!entry) return;
  infoPane.innerHTML = `
    <h3>${escapeHtml(entry.name)}</h3>
    <p class="muted">${escapeHtml(titleOf(entry))} â€¢ ${escapeHtml(entry.source||'Unknown')}</p>
    <p style="margin-top:8px">${escapeHtml(entry.desc || 'No description available.')}</p>
    <div class="stat-row">
      ${entry.type==='monster'?`<div class="stat">CR: ${escapeHtml(String(entry.cr||'â€”'))}</div>`:''}
      ${entry.type==='spell'?`<div class="stat">Level: ${escapeHtml(String(entry.level||'â€”'))}</div>`:''}
      <div class="stat">Type: ${escapeHtml(entry.type)}</div>
      <div class="stat">Tags: ${escapeHtml((entry.tags||[]).join(', ')||'â€”')}</div>
    </div>
  `;
}

function shorten(s,n){ if(!s) return ''; return s.length>n? s.slice(0,n-1)+'â€¦': s; }
function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

// initial placeholder
doSearch('');

/*
HOW TO PLUG A LARGER DATASET:
1) Replace dndData with a big array. Example: const dndData = await fetch('/data/srd.json').then(r=>r.json())
2) Or implement a server endpoint that returns search results; change doSearch to call that endpoint when q.length > 2.

Notes on "knowing everything":
- This header uses your dataset. To have it "know everything" about DnD, feed it an authoritative SRD dataset, or connect to a remote knowledge API (your own game DB, open5e, or a private SRD mirror). For accurate rules/legal use, check the SRD license and content ownership.
*/

</script>

</body>
</html>
